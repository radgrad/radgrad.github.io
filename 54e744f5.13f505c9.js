(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{126:function(e,t,o){"use strict";o.r(t),o.d(t,"frontMatter",(function(){return i})),o.d(t,"metadata",(function(){return p})),o.d(t,"rightToc",(function(){return l})),o.d(t,"default",(function(){return s}));var r=o(1),n=o(6),a=(o(0),o(172)),i={title:"Heroku",sidebar_label:"Heroku"},p={id:"devops/deployment/heroku",title:"Heroku",description:"## Overview",source:"@site/docs/devops/deployment/heroku.md",permalink:"/docs/devops/deployment/heroku",sidebar_label:"Heroku",sidebar:"someSidebar",previous:{title:"DevOps Evaluation",permalink:"/docs/devops/evaluation"},next:{title:"NodeChef",permalink:"/docs/devops/deployment/nodechef"}},l=[{value:"Overview",id:"overview",children:[]},{value:"Install sample Meteor app",id:"install-sample-meteor-app",children:[]},{value:"Install Heroku",id:"install-heroku",children:[]},{value:"Create a new Heroku app",id:"create-a-new-heroku-app",children:[]},{value:"Install Meteor Buildpack Horse",id:"install-meteor-buildpack-horse",children:[]},{value:"Create a MongoDB instance",id:"create-a-mongodb-instance",children:[]},{value:"Set the application and database URLs",id:"set-the-application-and-database-urls",children:[]},{value:"Deployment (and redeployment)",id:"deployment-and-redeployment",children:[]}],c={rightToc:l};function s(e){var t=e.components,o=Object(n.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},c,o,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"overview"},"Overview"),Object(a.b)("p",null,"(Note from Arslan: Originally tried to use ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/jkrup/meteor-hero"}),"meteor-hero"),", but was unable to launch it following documentation. Error could have been on my part. Looking into other options, ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/AdmitHub/meteor-buildpack-horse"}),"Meteor Buildpack Horse")," seemed to have positive reviews. Deploying to Heroku was breeze with it, and so that is what is documented here.)"),Object(a.b)("p",null,"Instructions assume meteor, git, and npm are installed on your system."),Object(a.b)("h2",{id:"install-sample-meteor-app"},"Install sample Meteor app"),Object(a.b)("p",null,"To start, clone the sample app ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://ics-software-engineering.github.io/meteor-application-template-react/"}),"meteor-application-template-react")," to your local computer."),Object(a.b)("p",null,"Change directories to the app/ directory, and follow the template's installation instructions to verify everything is running well locally by running ",Object(a.b)("inlineCode",{parentName:"p"},"meteor npm install")," and ",Object(a.b)("inlineCode",{parentName:"p"},"meteor npm run start"),"."),Object(a.b)("h2",{id:"install-heroku"},"Install Heroku"),Object(a.b)("p",null,"First, sign up for a free account on Heroku at ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://signup.heroku.com/"}),"this page"),"."),Object(a.b)("p",null,"Next, download the ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://devcenter.heroku.com/articles/heroku-cli#download-and-install"}),"Heroku CLI tool"),". You might need to restart your shell client after instillation for it to take effect."),Object(a.b)("h2",{id:"create-a-new-heroku-app"},"Create a new Heroku app"),Object(a.b)("p",null,"To create a Heroku app to host your Meteor app, you musts first log into Heroku through your shell client. Change directories to the app/ directory, then run ",Object(a.b)("inlineCode",{parentName:"p"},"heroku login"),":"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> heroku login\nheroku: Press any key to open up the browser to login or q to exit:\nOpening browser to https://cli-auth.heroku.com/auth/cli/browser/5bfae492-b6b2-4982-a967-3e***redactedForPrivacy***\nLogging in... done\nLogged in as arslanxr@gmail.com\n")),Object(a.b)("p",null,"Now that you're logged in to Heroku, you can use the ",Object(a.b)("inlineCode",{parentName:"p"},"heroku create")," CLI command to create a new empty application on Heroku, along with an associated Git repository at Heroku:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> heroku create\nCreating app... done, \u2b22 enigmatic-thicket-32549\nhttps://enigmatic-thicket-32549.herokuapp.com/ | https://git.heroku.com/enigmatic-thicket-32549.git\n")),Object(a.b)("p",null,"You can use the git remote command ",Object(a.b)("inlineCode",{parentName:"p"},"git remote -v")," to confirm that a remote named heroku has been set for your app:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> git remote -v\nheroku  https://git.heroku.com/enigmatic-thicket-32549.git (fetch)\nheroku  https://git.heroku.com/enigmatic-thicket-32549.git (push)\n")),Object(a.b)("h2",{id:"install-meteor-buildpack-horse"},"Install Meteor Buildpack Horse"),Object(a.b)("p",null,"Now we follow step two of the ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/AdmitHub/meteor-buildpack-horse"}),"Meteor Buildpack Horse")," docs."),Object(a.b)("p",null,"First, install the buildpack registry addon by running ",Object(a.b)("inlineCode",{parentName:"p"},"heroku plugins:install buildpack-registry"),":"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> heroku plugins:install buildpack-registry\nInstalling plugin buildpack-registry... installed v1.0.1\n")),Object(a.b)("p",null,"Next, run ",Object(a.b)("inlineCode",{parentName:"p"},"heroku buildpacks:set admithub/meteor-horse")," to set the buildpack to the latest version."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> heroku buildpacks:set admithub/meteor-horse\nBuildpack set. Next release on enigmatic-thicket-32549 will use admithub/meteor-horse.\nRun git push heroku master to create a new release using this buildpack.\n")),Object(a.b)("h2",{id:"create-a-mongodb-instance"},"Create a MongoDB instance"),Object(a.b)("p",null,"Before we can actually deploy the Meteor app, we need to set up a MongoDB database instance in which to store the data.  Heroku does not provide MongoDB hosting, so we will use the free tier of MongoDB Atlas hosting service."),Object(a.b)("p",null,"See ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/devops/deployment/mongo-url"}),"Setting up a MongoDB Instance")," for instructions on how to create the MongoDB instance."),Object(a.b)("p",null,"This process should yield a MONGO_URL connection string for use below."),Object(a.b)("h2",{id:"set-the-application-and-database-urls"},"Set the application and database URLs"),Object(a.b)("p",null,"First, set the url by running ",Object(a.b)("inlineCode",{parentName:"p"},'heroku config:set ROOT_URL="https://<appname>.herokuapp.com"'),", changing ",Object(a.b)("inlineCode",{parentName:"p"},"<appname>")," to whatever your app is called."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'PS G:\\GitFolder\\meteor-application-template-react\\app> heroku config:set ROOT_URL="https://meteor-application-template-react.herokuapp.com"\nSetting ROOT_URL and restarting \u2b22 enigmatic-thicket-32549... done, v3\nROOT_URL: https://meteor-application-template-react.herokuapp.com\n')),Object(a.b)("p",null,"Second, set the MONGO_URL by using the connection string Atlas provided us and running: ",Object(a.b)("inlineCode",{parentName:"p"},'heroku config:set MONGO_URL="mongodb+srv://arslanr:MYPASSWORD@cluster0.rbdff.mongodb.net/MYDATABASENAME?retryWrites=true&w=majority"'),". Make sure to modify the string with your atlas password and give your database a name."),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> heroku config:set MONGO_URL=\"mongodb+srv://arslanr:MYPASSWORD@cluster0.rbdff.mongodb.net/MYDATABASENAME?retryWrites=true&w=majority\"\nSetting MONGO_URL and restarting \u2b22 enigmatic-thicket-32549... done, v4\nMONGO_URL: mongodb+srv://arslanr:MYPASSWORD@cluster0.rbdff.mongodb.net/MYDATABASENAME?retryWrites=true\n'w' is not recognized as an internal or external command,\noperable program or batch file.\n")),Object(a.b)("h2",{id:"deployment-and-redeployment"},"Deployment (and redeployment)"),Object(a.b)("p",null,"Once that's done, you can deploy your app any time by pushing your application to heroku with ",Object(a.b)("inlineCode",{parentName:"p"},"git push heroku master")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'PS G:\\GitFolder\\meteor-application-template-react\\app> git push heroku master\nEnumerating objects: 14730, done.\nCounting objects: 100% (14730/14730), done.\nDelta compression using up to 8 threads\nCompressing objects: 100% (10071/10071), done.\nWriting objects: 100% (14730/14730), 12.94 MiB | 642.00 KiB/s, done.\nTotal 14730 (delta 3850), reused 14730 (delta 3850)\nremote: Compressing source files... done.\nremote: Building source:\nremote:\nremote: -----\x3e Node.js app detected\nremote: -----\x3e Installing meteor\nremote: Downloading Meteor distribution\nremote:\nremote: Meteor 1.10.2 has been installed in your home directory (~/.meteor).\nremote:\nremote: Now you need to do one of the following:\nremote:\nremote:   (1) Add "$HOME/.meteor" to your path, or\nremote:   (2) Run this command as root:\nremote:         cp "/tmp/codon/tmp/cache/meteor/.meteor/packages/meteor-tool/1.10.2/mt-os.linux.x86_64/scripts/admin/launch-meteor" /usr/bin/meteor\nremote:\nremote: Then to get started, take a look at \'meteor --help\' or see the docs at\nremote: docs.meteor.com.\nremote: -----\x3e Target Meteor version: Meteor 1.10.2\nremote: -----\x3e Checking if this meteor version supports --server-only\nremote: -----\x3e Using node: v12.16.1\nremote: -----\x3e    and npm: 6.14.0\nremote: audited 416 packages in 3.571s\nremote:\nremote: 21 packages are looking for funding\nremote:   run `npm fund` for details\nremote:\nremote: found 22 low severity vulnerabilities\nremote:   run `npm audit fix` to fix them, or `npm audit` for details\nremote: -----\x3e Building Meteor app with ROOT_URL: https://meteor-application-template-react.herokuapp.com\nremote: app/node_modules/semantic-ui-css/semantic.css: warn: There are some @import rules in the middle of a file. This might be a bug, as imports are only valid at the beginning of a file.\nremote: Browserslist: caniuse-lite is outdated. Please run next command `npm update`\nremote:\nremote: Unable to resolve some modules:\nremote:\nremote:   "@babel/runtime/helpers/createSuper" in\nremote: /tmp/build_30ad13c7/imports/ui/layouts/App.jsx (web.browser.legacy)\nremote:\nremote: If you notice problems related to these missing modules, consider running:\nremote:\nremote:   meteor npm install --save @babel/runtime\nremote:\nremote: -----\x3e Moving built slug to /tmp/build_30ad13c7/.meteor/heroku_build/app\nremote: -----\x3e Installing npm production dependencies on built slug\nremote: npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nremote:\nremote: > fibers@4.0.3 install /tmp/build_30ad13c7/.meteor/heroku_build/app/programs/server/node_modules/fibers\nremote: > node build.js || nodejs build.js\nremote:\nremote: `linux-x64-72-glibc` exists; testing\nremote: Binary is fine; exiting\nremote:\nremote: > meteor-dev-bundle@ install /tmp/build_30ad13c7/.meteor/heroku_build/app/programs/server\nremote: > node npm-rebuild.js\nremote:\nremote:\nremote: > core-js@3.2.1 postinstall /tmp/build_30ad13c7/.meteor/heroku_build/app/programs/server/npm/node_modules/meteor/ecmascript-runtime-client/node_modules/core-js\nremote: > node scripts/postinstall || echo "ignore"\nremote:\nremote: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\nremote:\nremote: The project needs your help! Please consider supporting of core-js on Open Collective or Patreon:\nremote: > https://opencollective.com/core-js\nremote: > https://www.patreon.com/zloirock\nremote:\nremote: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\nremote:\nremote: core-js@3.2.1 /tmp/build_30ad13c7/.meteor/heroku_build/app/programs/server/npm/node_modules/meteor/ecmascript-runtime-client/node_modules/core-js\nremote:\nremote: > core-js@3.2.1 postinstall /tmp/build_30ad13c7/.meteor/heroku_build/app/programs/server/npm/node_modules/meteor/ecmascript-runtime-server/node_modules/core-js\nremote: > node scripts/postinstall || echo "ignore"\nremote:\nremote: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\nremote:\nremote: The project needs your help! Please consider supporting of core-js on Open Collective or Patreon:\nremote: > https://opencollective.com/core-js\nremote: > https://www.patreon.com/zloirock\nremote:\nremote: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\nremote:\n...\n... \n...\nremote: -----\x3e Adding PATH environment\nremote: -----\x3e Running extras\nremote: -----\x3e Adding profile script to resolve MONGO_URL from mongolab addon\nremote: -----\x3e Adding profile script to resolve ROOT_URL from heroku app name\nremote: -----\x3e Discovering process types\nremote:        Procfile declares types     -> (none)\nremote:        Default types for buildpack -> web\nremote:\nremote: -----\x3e Compressing...\nremote:        Done: 71.6M\nremote: -----\x3e Launching...\nremote:        Released v5\nremote:        https://enigmatic-thicket-32549.herokuapp.com/ deployed to Heroku\nremote:\nremote: Verifying deploy... done.\nTo https://git.heroku.com/enigmatic-thicket-32549.git\n * [new branch]      master -> master\n')),Object(a.b)("p",null,"The website should be running at ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://enigmatic-thicket-32549.herokuapp.com/"}),"https://enigmatic-thicket-32549.herokuapp.com/"),". There are ways to rename the URL ",Object(a.b)("inlineCode",{parentName:"p"},"enigmatic-thicket-32549")," part to anything you want."),Object(a.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(a.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(a.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"warning")),Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(a.b)("p",{parentName:"div"},"According to ROOT_URL, I think the application should be available at: ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://meteor-application-template-react.herokuapp.com/"}),"https://meteor-application-template-react.herokuapp.com/"),", but it's not.   Did you actually set the ROOT_URL correctly in these instructions?"))))}s.isMDXComponent=!0},172:function(e,t,o){"use strict";o.d(t,"a",(function(){return m})),o.d(t,"b",(function(){return b}));var r=o(0),n=o.n(r);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var c=n.a.createContext({}),s=function(e){var t=n.a.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):p({},t,{},e)),o},m=function(e){var t=s(e.components);return n.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},d=Object(r.forwardRef)((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(o),d=r,b=m["".concat(i,".").concat(d)]||m[d]||u[d]||a;return o?n.a.createElement(b,p({ref:t},c,{components:o})):n.a.createElement(b,p({ref:t},c))}));function b(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=d;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:r,i[1]=p;for(var c=2;c<a;c++)i[c]=o[c];return n.a.createElement.apply(null,i)}return n.a.createElement.apply(null,o)}d.displayName="MDXCreateElement"}}]);