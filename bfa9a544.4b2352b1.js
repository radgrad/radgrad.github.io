(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{152:function(e,t,o){"use strict";o.r(t),o.d(t,"frontMatter",(function(){return i})),o.d(t,"metadata",(function(){return p})),o.d(t,"rightToc",(function(){return l})),o.d(t,"default",(function(){return m}));var n=o(1),r=o(6),a=(o(0),o(172)),i={title:"Meteor Hero",sidebar_label:"Meteor Hero"},p={id:"devops/deployment/meteor-hero",title:"Meteor Hero",description:"## Deployment to Heroku\r",source:"@site/docs\\devops\\deployment\\meteor-hero.md",permalink:"/docs/devops/deployment/meteor-hero",sidebar_label:"Meteor Hero",sidebar:"someSidebar",previous:{title:"DevOps Evaluation",permalink:"/docs/devops/evaluation"},next:{title:"Obtaining MONGO_URL with MongoDB Atlas",permalink:"/docs/devops/deployment/mongo-url"}},l=[{value:"Deployment to Heroku",id:"deployment-to-heroku",children:[]}],c={rightToc:l};function m(e){var t=e.components,o=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(n.a)({},c,o,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"deployment-to-heroku"},"Deployment to Heroku"),Object(a.b)("p",null,"Originally recommended to use meteor-hero, but I was unable to launch it following documentation. Error could have been on my part. Looking into other options, ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/AdmitHub/meteor-buildpack-horse"}),"Meteor Buildpack Horse")," seemed to have positive reviews. Deploying to Heroku was breeze with it."),Object(a.b)("p",null,"To start, clone the sample ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://ics-software-engineering.github.io/meteor-application-template-react/"}),"meteor repo"),"\n",Object(a.b)("inlineCode",{parentName:"p"},"cd path/to/app"),". Verify everything is running well locally by running ",Object(a.b)("inlineCode",{parentName:"p"},"meteor npm install")," and ",Object(a.b)("inlineCode",{parentName:"p"},"meteor npm run start")),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> meteor npm install\n\n> core-js@3.6.4 postinstall G:\\GitFolder\\meteor-application-template-react\\app\\node_modules\\core-js\n> node -e \"try{require('./postinstall')}catch(e){}\"\n\nadded 416 packages from 333 contributors and audited 416 packages in 43.24s\n\n21 packages are looking for funding\n  run `npm fund` for details\n\nfound 22 low severity vulnerabilities\n  run `npm audit fix` to fix them, or `npm audit` for details\n")),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),'PS G:\\GitFolder\\meteor-application-template-react\\app> meteor npm run start\n\n> meteor-application-template-react@ start G:\\GitFolder\\meteor-application-template-react\\app\n> meteor --no-release-check --settings ../config/settings.development.json\n\n[[[[[ ~\\G\\GitFolder\\meteor-application-template-react\\app ]]]]]\n\n=> Started proxy.\n\nUnable to resolve some modules:\n\n  "@babel/runtime/helpers/createSuper" in /G/GitFolder/meteor-application-template-react/app/imports/ui/layouts/App.jsx (web.browser.legacy)\n\nIf you notice problems related to these missing modules, consider running:\n\n  meteor npm install --save @babel/runtime\n\n=> Started MongoDB.\nW20200716-23:58:17.211(-7)? (STDERR) Note: you are using a pure-JavaScript implementation of bcrypt.\nW20200716-23:58:17.684(-7)? (STDERR) While this implementation will work correctly, it is known to be\nW20200716-23:58:17.686(-7)? (STDERR) approximately three times slower than the native implementation.\nW20200716-23:58:17.698(-7)? (STDERR) In order to use the native implementation instead, run\nW20200716-23:58:17.699(-7)? (STDERR)\nW20200716-23:58:17.699(-7)? (STDERR)   meteor npm install --save bcrypt\nW20200716-23:58:17.701(-7)? (STDERR)\nW20200716-23:58:17.701(-7)? (STDERR) in the root directory of your application.\nI20200716-23:58:18.283(-7)? Creating the default user(s)\nI20200716-23:58:18.287(-7)?   Creating user admin@foo.com.\nI20200716-23:58:18.558(-7)?   Creating user john@foo.com.\nI20200716-23:58:18.793(-7)? Creating default data.\nI20200716-23:58:18.797(-7)?   Adding: Basket (john@foo.com)\nI20200716-23:58:18.813(-7)?   Adding: Bicycle (john@foo.com)\nI20200716-23:58:18.816(-7)?   Adding: Banana (admin@foo.com)\nI20200716-23:58:18.821(-7)?   Adding: Boogie Board (admin@foo.com)\n=> Started your app.\n\n=> App running at: http://localhost:3000/\n   Type Control-C twice to stop.\n')),Object(a.b)("h1",{id:"sign-up-with-heroku"},"SIGN UP WITH HEROKU"),Object(a.b)("p",null,"Following step 1 of ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/AdmitHub/meteor-buildpack-horse"}),"Meteor Buildpack Horse")," docs, the app needs to be set up to deploy with Heroku. "),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Sign up for a free account on Heroku."),Object(a.b)("li",{parentName:"ul"},"Verify you have Git installed on your computer."),Object(a.b)("li",{parentName:"ul"},"Download the ",Object(a.b)("a",Object(n.a)({parentName:"li"},{href:"https://devcenter.heroku.com/articles/heroku-cli#download-and-install"}),"Heroku CLI tool")," ",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"You might need to restart your shell client after instillation for it to take effect")))),Object(a.b)("p",null,"Log into Heroku through your shell client"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),"cd path/to/app\n\nPS G:\\GitFolder\\meteor-application-template-react\\app> heroku login\nheroku: Press any key to open up the browser to login or q to exit:\nOpening browser to https://cli-auth.heroku.com/auth/cli/browser/5bfae492-b6b2-4982-a967-3e***redactedForPrivacy***\nLogging in... done\nLogged in as arslanxr@gmail.com\n")),Object(a.b)("p",null,"We need to create an application on Heroku, and eventually push our code to it. The ",Object(a.b)("inlineCode",{parentName:"p"},"heroku create")," CLI command creates a new empty application on Heroku, along with an associated empty Git repository."),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> heroku create\nCreating app... done, \u2b22 enigmatic-thicket-32549\nhttps://enigmatic-thicket-32549.herokuapp.com/ | https://git.heroku.com/enigmatic-thicket-32549.git\n")),Object(a.b)("p",null,"Use the git remote command ",Object(a.b)("inlineCode",{parentName:"p"},"git remote -v")," to confirm that a remote named heroku has been set for your app"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> git remote -v\nheroku  https://git.heroku.com/enigmatic-thicket-32549.git (fetch)\nheroku  https://git.heroku.com/enigmatic-thicket-32549.git (push)\n")),Object(a.b)("p",null,"Jumping back to Meteor Buildpack Horse docs, we move on to step 2. First, install the buildpack registry addon by running ",Object(a.b)("inlineCode",{parentName:"p"},"heroku plugins:install buildpack-registry")),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> heroku plugins:install buildpack-registry\nInstalling plugin buildpack-registry... installed v1.0.1\n")),Object(a.b)("p",null,"Run ",Object(a.b)("inlineCode",{parentName:"p"},"heroku buildpacks:set admithub/meteor-horse")," to set the buildpack to the latest version."),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> heroku buildpacks:set admithub/meteor-horse\nBuildpack set. Next release on enigmatic-thicket-32549 will use admithub/meteor-horse.\nRun git push heroku master to create a new release using this buildpack.\n")),Object(a.b)("h1",{id:"obtain-a-mongo_url"},"OBTAIN A MONGO_URL"),Object(a.b)("p",null,"Instructions on how to obtain a MONGO_URL connection string can be found ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"docs/devops/deployment/mongo-url.md"}),"here")),Object(a.b)("h1",{id:"deploying"},"DEPLOYING"),Object(a.b)("p",null,"Lets set our url by running ",Object(a.b)("inlineCode",{parentName:"p"},'heroku config:set ROOT_URL="https://<appname>.herokuapp.com"'),", but first, change ",Object(a.b)("inlineCode",{parentName:"p"},"<appname>")," to whatever your app is called. "),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),'PS G:\\GitFolder\\meteor-application-template-react\\app> heroku config:set ROOT_URL="https://meteor-application-template-react.herokuapp.com"\nSetting ROOT_URL and restarting \u2b22 enigmatic-thicket-32549... done, v3\nROOT_URL: https://meteor-application-template-react.herokuapp.com\n')),Object(a.b)("p",null,"We also set the MONGO_URL by using the connection string Atlas provided us. ",Object(a.b)("inlineCode",{parentName:"p"},'heroku config:set MONGO_URL="mongodb+srv://arslanr:MYPASSWORD@cluster0.rbdff.mongodb.net/MYDATABASENAME?retryWrites=true&w=majority"'),". Make sure to modify the string with your atlas password and give your database a name."),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),"PS G:\\GitFolder\\meteor-application-template-react\\app> heroku config:set MONGO_URL=\"mongodb+srv://arslanr:MYPASSWORD@cluster0.rbdff.mongodb.net/MYDATABASENAME?retryWrites=true&w=majority\"\nSetting MONGO_URL and restarting \u2b22 enigmatic-thicket-32549... done, v4\nMONGO_URL: mongodb+srv://arslanr:MYPASSWORD@cluster0.rbdff.mongodb.net/MYDATABASENAME?retryWrites=true\n'w' is not recognized as an internal or external command,\noperable program or batch file.\n")),Object(a.b)("p",null,"Once that's done, you can deploy your app using this build pack any time by pushing to heroku with ",Object(a.b)("inlineCode",{parentName:"p"},"git push heroku master")),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),'PS G:\\GitFolder\\meteor-application-template-react\\app> git push heroku master\nEnumerating objects: 14730, done.\nCounting objects: 100% (14730/14730), done.\nDelta compression using up to 8 threads\nCompressing objects: 100% (10071/10071), done.\nWriting objects: 100% (14730/14730), 12.94 MiB | 642.00 KiB/s, done.\nTotal 14730 (delta 3850), reused 14730 (delta 3850)\nremote: Compressing source files... done.\nremote: Building source:\nremote:\nremote: -----\x3e Node.js app detected\nremote: -----\x3e Installing meteor\nremote: Downloading Meteor distribution\nremote:\nremote: Meteor 1.10.2 has been installed in your home directory (~/.meteor).\nremote:\nremote: Now you need to do one of the following:\nremote:\nremote:   (1) Add "$HOME/.meteor" to your path, or\nremote:   (2) Run this command as root:\nremote:         cp "/tmp/codon/tmp/cache/meteor/.meteor/packages/meteor-tool/1.10.2/mt-os.linux.x86_64/scripts/admin/launch-meteor" /usr/bin/meteor\nremote:\nremote: Then to get started, take a look at \'meteor --help\' or see the docs at\nremote: docs.meteor.com.\nremote: -----\x3e Target Meteor version: Meteor 1.10.2\nremote: -----\x3e Checking if this meteor version supports --server-only\nremote: -----\x3e Using node: v12.16.1\nremote: -----\x3e    and npm: 6.14.0\nremote: audited 416 packages in 3.571s\nremote:\nremote: 21 packages are looking for funding\nremote:   run `npm fund` for details\nremote:\nremote: found 22 low severity vulnerabilities\nremote:   run `npm audit fix` to fix them, or `npm audit` for details\nremote: -----\x3e Building Meteor app with ROOT_URL: https://meteor-application-template-react.herokuapp.com\nremote: app/node_modules/semantic-ui-css/semantic.css: warn: There are some @import rules in the middle of a file. This might be a bug, as imports are only valid at the beginning of a file.\nremote: Browserslist: caniuse-lite is outdated. Please run next command `npm update`\nremote:\nremote: Unable to resolve some modules:\nremote:\nremote:   "@babel/runtime/helpers/createSuper" in\nremote: /tmp/build_30ad13c7/imports/ui/layouts/App.jsx (web.browser.legacy)\nremote:\nremote: If you notice problems related to these missing modules, consider running:\nremote:\nremote:   meteor npm install --save @babel/runtime\nremote:\nremote: -----\x3e Moving built slug to /tmp/build_30ad13c7/.meteor/heroku_build/app\nremote: -----\x3e Installing npm production dependencies on built slug\nremote: npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nremote:\nremote: > fibers@4.0.3 install /tmp/build_30ad13c7/.meteor/heroku_build/app/programs/server/node_modules/fibers\nremote: > node build.js || nodejs build.js\nremote:\nremote: `linux-x64-72-glibc` exists; testing\nremote: Binary is fine; exiting\nremote:\nremote: > meteor-dev-bundle@ install /tmp/build_30ad13c7/.meteor/heroku_build/app/programs/server\nremote: > node npm-rebuild.js\nremote:\nremote:\nremote: > core-js@3.2.1 postinstall /tmp/build_30ad13c7/.meteor/heroku_build/app/programs/server/npm/node_modules/meteor/ecmascript-runtime-client/node_modules/core-js\nremote: > node scripts/postinstall || echo "ignore"\nremote:\nremote: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\nremote:\nremote: The project needs your help! Please consider supporting of core-js on Open Collective or Patreon:\nremote: > https://opencollective.com/core-js\nremote: > https://www.patreon.com/zloirock\nremote:\nremote: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\nremote:\nremote: core-js@3.2.1 /tmp/build_30ad13c7/.meteor/heroku_build/app/programs/server/npm/node_modules/meteor/ecmascript-runtime-client/node_modules/core-js\nremote:\nremote: > core-js@3.2.1 postinstall /tmp/build_30ad13c7/.meteor/heroku_build/app/programs/server/npm/node_modules/meteor/ecmascript-runtime-server/node_modules/core-js\nremote: > node scripts/postinstall || echo "ignore"\nremote:\nremote: Thank you for using core-js ( https://github.com/zloirock/core-js ) for polyfilling JavaScript standard library!\nremote:\nremote: The project needs your help! Please consider supporting of core-js on Open Collective or Patreon:\nremote: > https://opencollective.com/core-js\nremote: > https://www.patreon.com/zloirock\nremote:\nremote: Also, the author of core-js ( https://github.com/zloirock ) is looking for a good job -)\nremote:\n...\n... \n...\nremote: -----\x3e Adding PATH environment\nremote: -----\x3e Running extras\nremote: -----\x3e Adding profile script to resolve MONGO_URL from mongolab addon\nremote: -----\x3e Adding profile script to resolve ROOT_URL from heroku app name\nremote: -----\x3e Discovering process types\nremote:        Procfile declares types     -> (none)\nremote:        Default types for buildpack -> web\nremote:\nremote: -----\x3e Compressing...\nremote:        Done: 71.6M\nremote: -----\x3e Launching...\nremote:        Released v5\nremote:        https://enigmatic-thicket-32549.herokuapp.com/ deployed to Heroku\nremote:\nremote: Verifying deploy... done.\nTo https://git.heroku.com/enigmatic-thicket-32549.git\n * [new branch]      master -> master\n')),Object(a.b)("p",null,"The website should be running at ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://enigmatic-thicket-32549.herokuapp.com/"}),"https://enigmatic-thicket-32549.herokuapp.com/"),". There are ways to rename the URL ",Object(a.b)("inlineCode",{parentName:"p"},"enigmatic-thicket-32549")," part to anything you want."))}m.isMDXComponent=!0},172:function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return b}));var n=o(0),r=o.n(n);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var c=r.a.createContext({}),m=function(e){var t=r.a.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):p({},t,{},e)),o},s=function(e){var t=m(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=Object(n.forwardRef)((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),s=m(o),d=n,b=s["".concat(i,".").concat(d)]||s[d]||u[d]||a;return o?r.a.createElement(b,p({ref:t},c,{components:o})):r.a.createElement(b,p({ref:t},c))}));function b(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,i=new Array(a);i[0]=d;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:n,i[1]=p;for(var c=2;c<a;c++)i[c]=o[c];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,o)}d.displayName="MDXCreateElement"}}]);