<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.63">
<title data-react-helmet="true">Testing | RadGrad 2020</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Testing | RadGrad 2020"><meta data-react-helmet="true" name="description" content="RadGrad provides &quot;unit&quot; and &quot;integration&quot; tests. Both are designed to be run from the command line and useful for continuous integration."><meta data-react-helmet="true" property="og:description" content="RadGrad provides &quot;unit&quot; and &quot;integration&quot; tests. Both are designed to be run from the command line and useful for continuous integration."><meta data-react-helmet="true" property="og:url" content="https://radgrad.github.io/docs/radgrad2/developer/testing"><link data-react-helmet="true" rel="shortcut icon" href="/img/radgrad.ico"><link data-react-helmet="true" rel="canonical" href="https://radgrad.github.io/docs/radgrad2/developer/testing"><link rel="stylesheet" href="/styles.e2e9d058.css">
<link rel="preload" href="/styles.6291c63d.js" as="script">
<link rel="preload" href="/runtime~main.d0e1d563.js" as="script">
<link rel="preload" href="/main.3733249a.js" as="script">
<link rel="preload" href="/1.38e39c96.js" as="script">
<link rel="preload" href="/2.df0254a7.js" as="script">
<link rel="preload" href="/103.3e731ed5.js" as="script">
<link rel="preload" href="/104.f1b3eb6d.js" as="script">
<link rel="preload" href="/f976f453.fba135c2.js" as="script">
<link rel="preload" href="/17896441.fec868e8.js" as="script">
<link rel="preload" href="/b544806a.0f555ce2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/radgrad_logo.png" alt="RadGrad"><strong class="navbar__title">RadGrad</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview/motivation">Docs</a><a class="navbar__item navbar__link" href="/blog">News</a><a href="https://github.com/radgrad/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/radgrad_logo.png" alt="RadGrad"><strong class="navbar__title">RadGrad</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/overview/motivation">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">News</a></li><li class="menu__list-item"><a href="https://github.com/radgrad/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/motivation">Motivation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/managing-this-site">Managing this site</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/engineering-standards">Engineering Standards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/remote-pair-programming">Remote Pair Programming</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/markdown-reference">Markdown Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/mdx">Using JSX/Markdown</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">DevOps</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/goals">Goals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/evaluation">Evaluation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deployment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/deployment/heroku">Heroku</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/deployment/nodechef">NodeChef</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/deployment/digital-ocean">Digital Ocean</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/deployment/google-cloud">Google Cloud</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/deployment/microsoft-azure">Microsoft Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/deployment/uh-its">UH ITS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/deployment/aws">AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/deployment/mongo-url">Obtaining a MONGO_URL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/devops/deployment/waves-hosting">Waves Hosting</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">InternBit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/internbit/goals">Goals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/internbit/resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/internbit/scraping">Scraping</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/internbit/needs-assessment">InternBit Needs Assessment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/internbit/canonical-schema">Canonical Schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/internbit/evaluation">Evaluation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CSExplore</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/csexplore/goals">Goals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/csexplore/resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/csexplore/organizing-principle">Organizing Principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/csexplore/evaluation">Evaluation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Mockups</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/csexplore/annotated-mockup/save-hawaii-with-computer-science">Save Hawaii with CS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/csexplore/annotated-mockup/csexplore-ocean-earth">CSExplore Ocean and Earth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/csexplore/annotated-mockup/find-the-path">Find the Path to CS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/csexplore/annotated-mockup/CS-Explore-Chat">CS Explore Chat</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/csexplore/annotated-mockup/build-your-community">Build Your Community</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">RadGrad2</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/goals">Goals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/evaluation">Evaluation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/radgrad2/overview/radgrad-concepts">Concepts</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Developer Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/ide">IDE Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/source-code-organization">Source code organization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/coding-standards">Coding Standards</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/radgrad2/developer/testing">Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/e2e-testing">e2e Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/testing-with-different-roles">Testing With Different Roles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/building-academic-plans">Academic Plans</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/database-fixtures">Database Fixtures</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/continuous-integration">Continuous Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/radgrad.org">radgrad.org</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/radgrad-patterns">RadGrad Patterns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/radgrad2/developer/redux">State and Redux</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Data Model</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/radgrad2/datamodel/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/radgrad2/datamodel/class-hierarchy">Class Hierarchy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/radgrad2/datamodel/entity-relationship-model">Entity-Relationship Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/radgrad2/datamodel/user-management">User Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/radgrad2/datamodel/ice">ICE (Innovation, Competency, Experience)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/radgrad2/datamodel/dump-restore">Database Dump-Restore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/radgrad2/datamodel/pub-sub">Pub-Sub Caching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/radgrad2/datamodel/integrity-checking">Integrity Checking</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Testing</h1></header><div class="markdown"><p>RadGrad provides &quot;unit&quot; and &quot;integration&quot; tests. Both are designed to be run from the command line and useful for continuous integration.</p><p>Unit tests are tests that run only on the server side, and which focus on verifying that the RadGrad data model (i.e. the set of Collection classes) work as intended.</p><p>Integration tests are initiated from the client side, and test to ensure that client-server interactions work as intended. Currently, integration tests only check that Meteor method implementations function correctly. We do not yet have UI tests, such as tests that would be implemented using Selenium or some other browser driver.</p><p>We use the <a href="https://mochajs.org/" target="_blank" rel="noopener noreferrer">Mocha</a> test runner and  <a href="http://chaijs.com/guide/styles/#expect" target="_blank" rel="noopener noreferrer">Chai Expect Assertions</a>. We follow recommendations from the <a href="http://guide.meteor.com/testing.html#unit-testing" target="_blank" rel="noopener noreferrer">Meteor Guide Unit Testing Chapter</a>.</p><p>Each collection class contains its tests in a &quot;sibling&quot; file. For example, unit tests for CourseCollection.js are located in <a href="https://github.com/radgrad/radgrad/blob/master/app/imports/api/course/CourseCollection.test.js" target="_blank" rel="noopener noreferrer">CourseCollection.test.js</a>. Its integration tests that focus on its Meteor Methods are located in <a href="https://github.com/radgrad/radgrad/blob/master/app/imports/api/course/CourseInstanceCollection.methods.app-test.js" target="_blank" rel="noopener noreferrer">CourseCollection.app-test.js</a>.</p><p>The test file names are important: Meteor wants unit tests to be in files with the suffix <code>test.js</code>, and integration tests to be in files with the suffix <code>app-test.js</code>.</p><p>Many tests require the database to be initialized with test values.  RadGrad provides &quot;database fixture&quot; files for this purpose. See the <a href="/docs/radgrad2/developer/database-fixtures">DB fixture</a> chapter for more details.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="unit-testing"></a>Unit testing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#unit-testing" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="running-the-tests"></a>Running the tests<a aria-hidden="true" tabindex="-1" class="hash-link" href="#running-the-tests" title="Direct link to heading">#</a></h3><p>To invoke the unit tests, use this command:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">app$ meteor npm run test</span></div></div></div></div></div><p>This will implicitly run ESLint over the code base first, then run the unit tests (i.e. those files with a <code>test.js</code> suffix). Here&#x27;s a sample invocation with some lines elided for brevity:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ meteor npm run test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ pretest /Users/philipjohnson/github/radgrad/radgrad/app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; npm run lint</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ lint /Users/philipjohnson/github/radgrad/radgrad/app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; eslint --quiet ./imports</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ test /Users/philipjohnson/github/radgrad/radgrad/app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; TEST_BROWSER_DRIVER=nightmare meteor test --once --driver-package dispatch:mocha --no-release-check --port 3100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[[[[ Tests ]]]]]                             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started proxy.                             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started MongoDB.                           </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.714(-10)?                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.796(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.800(-10)? ----- RUNNING SERVER TESTS -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.801(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.804(-10)? </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.805(-10)?   CareerGoalCollection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.806(-10)? Kadira: completed instrumenting the app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started your app.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; App running at: http://localhost:3100/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.354(-10)? </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.368(-10)?     âœ“ #define, #isDefined, #removeIt, #dumpOne, #restoreOne, #getSlug, #findNames (319ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.521(-10)?   CourseCollection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.734(-10)?     âœ“ #define, #isDefined, #removeIt, #dumpOne, #restoreOne (199ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.810(-10)?     âœ“ course shortname (74ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.886(-10)?   CourseInstanceCollection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:16.371(-10)?     âœ“ #define, #isDefined, #removeIt, #dumpOne, #restoreOne (208ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:16.391(-10)?     âœ“ #findCourseName, #toString</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                :                       :                  :</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                :                       :                  :</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:32.692(-10)?   StudentProfileCollection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:32.831(-10)?     âœ“ #define, #isDefined, #update, #removeIt, #dumpOne, #restoreOne (93ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:32.871(-10)?   VerificationRequestCollection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.121(-10)?     âœ“ #define, #isDefined, #removeIt, #findOne, #toString, #dumpOne, #restoreOne (209ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.266(-10)?     âœ“ #define using semester and opportunity (146ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.342(-10)?   80 passing (19s)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.342(-10)?   2 pending</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.344(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.344(-10)? ----- RUNNING CLIENT TESTS -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.345(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.031(-10)?   0 passing (1ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.048(-10)? [ERROR] There is no route for the path: /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.149(-10)? All tests finished!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.150(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.151(-10)? SERVER FAILURES: 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.151(-10)? CLIENT FAILURES: 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.152(-10)? --------------------------------</span></div></div></div></div></div><p>There should be no server or client failures listed. There will also be no client tests at all. In RadGrad, all unit tests occur on the server side.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ubuntu-running-issue"></a>Ubuntu running issue<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ubuntu-running-issue" title="Direct link to heading">#</a></h4><p>On some linux installations, for example Ubuntu the tests might hang and never end. This is due to missing libraries that nightmare needs. To fix this issue run:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt-get install -y xvfb x11-xkb-utils xfonts-100dpi xfonts-75dpi xfonts-scalable xfonts-cyrillic x11-apps clang libdbus-1-dev libgtk2.0-dev libnotify-dev libgnome-keyring-dev libgconf2-dev libasound2-dev libcap-dev libcups2-dev libxtst-dev libxss1 libnss3-dev gcc-multilib g++-multilib</span></div></div></div></div></div><p>This will install xvfb and all of its dependencies.</p><p>To run a subset of the tests you can set the environment variable <code>MOCHA_GREP</code>. If <code>MOCHA_GREP</code> matches the name of the test as defined in the <code>describe</code> statement those tests will run.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setting-the-mocha_grep-environment-variable"></a>Setting the MOCHA_GREP environment variable<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setting-the-mocha_grep-environment-variable" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="fish-shell"></a>Fish shell<a aria-hidden="true" tabindex="-1" class="hash-link" href="#fish-shell" title="Direct link to heading">#</a></h5><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ env MOCHA_GREP=&quot;CourseCollection&quot; meteor npm run test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ pretest /Users/philipjohnson/github/radgrad/radgrad/app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; npm run lint</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ lint /Users/philipjohnson/github/radgrad/radgrad/app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; eslint --quiet ./imports</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ test /Users/philipjohnson/github/radgrad/radgrad/app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; TEST_BROWSER_DRIVER=nightmare meteor test --once --driver-package dispatch:mocha --no-release-check --port 3100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[[[[ Tests ]]]]]                             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started proxy.                             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started MongoDB.                           </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.714(-10)?                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.796(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.800(-10)? ----- RUNNING SERVER TESTS -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.801(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.804(-10)? </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.521(-10)?   CourseCollection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.734(-10)?     âœ“ #define, #isDefined, #removeIt, #dumpOne, #restoreOne (199ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.810(-10)?     âœ“ course shortname (74ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.342(-10)?   2 passing (19s)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.344(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.344(-10)? ----- RUNNING CLIENT TESTS -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.345(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.031(-10)?   0 passing (1ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.048(-10)? [ERROR] There is no route for the path: /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.149(-10)? All tests finished!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.150(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.151(-10)? SERVER FAILURES: 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.151(-10)? CLIENT FAILURES: 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.152(-10)? --------------------------------</span></div></div></div></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="bash-shell"></a>Bash shell<a aria-hidden="true" tabindex="-1" class="hash-link" href="#bash-shell" title="Direct link to heading">#</a></h5><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ export MOCHA_GREP=&quot;CourseCollection&quot; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ meteor npm run test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ pretest /Users/philipjohnson/github/radgrad/radgrad/app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; npm run lint</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ lint /Users/philipjohnson/github/radgrad/radgrad/app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; eslint --quiet ./imports</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ test /Users/philipjohnson/github/radgrad/radgrad/app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; TEST_BROWSER_DRIVER=nightmare meteor test --once --driver-package dispatch:mocha --no-release-check --port 3100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[[[[ Tests ]]]]]                             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started proxy.                             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started MongoDB.                           </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.714(-10)?                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.796(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.800(-10)? ----- RUNNING SERVER TESTS -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.801(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.804(-10)? </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.521(-10)?   CourseCollection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.734(-10)?     âœ“ #define, #isDefined, #removeIt, #dumpOne, #restoreOne (199ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.810(-10)?     âœ“ course shortname (74ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.342(-10)?   2 passing (19s)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.344(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.344(-10)? ----- RUNNING CLIENT TESTS -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.345(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.031(-10)?   0 passing (1ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.048(-10)? [ERROR] There is no route for the path: /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.149(-10)? All tests finished!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.150(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.151(-10)? SERVER FAILURES: 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.151(-10)? CLIENT FAILURES: 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.152(-10)? --------------------------------</span></div></div></div></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="windows-powershell"></a>Windows PowerShell<a aria-hidden="true" tabindex="-1" class="hash-link" href="#windows-powershell" title="Direct link to heading">#</a></h5><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ $Env:MOCHA_GREP=&quot;CourseCollection&quot; </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ meteor npm run test-win</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ pretest C:\GitHub\radgrad\app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; npm run lint</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ lint C:\GitHub\radgrad\app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; eslint --quiet ./imports</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ test C:\GitHub\radgrad\app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; meteor test --once --driver-package dispatch:mocha --no-release-check --port 3100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[[[[ Tests ]]]]]                             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started proxy.                             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started MongoDB.                           </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.714(-10)?                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.796(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.800(-10)? ----- RUNNING SERVER TESTS -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.801(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:14.804(-10)? </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.521(-10)?   CourseCollection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.734(-10)?     âœ“ #define, #isDefined, #removeIt, #dumpOne, #restoreOne (199ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:15.810(-10)?     âœ“ course shortname (74ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.342(-10)?   2 passing (19s)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.344(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.344(-10)? ----- RUNNING CLIENT TESTS -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:33.345(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.031(-10)?   0 passing (1ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.048(-10)? [ERROR] There is no route for the path: /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.149(-10)? All tests finished!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.150(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.151(-10)? SERVER FAILURES: 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.151(-10)? CLIENT FAILURES: 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:08:36.152(-10)? --------------------------------</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="structure-for-a-collection-unit-test"></a>Structure for a Collection Unit Test<a aria-hidden="true" tabindex="-1" class="hash-link" href="#structure-for-a-collection-unit-test" title="Direct link to heading">#</a></h3><p>RadGrad collection have five required methods.</p><ul><li><strong>define</strong>: Creates a new document in the collection. Returns the document&#x27;s id.</li><li><strong>update</strong>: Updates a document in the collection.</li><li><strong>removeIt</strong>: Removes a document from the collection.</li><li><strong>dumpOne</strong>: Returns a JSON object suitable for defining the document.</li><li><strong>checkIntegrity</strong>: Checks each document in the collection for integrity. Returns an array of problems.</li></ul><p>All of our unit test have a standard format. We ensure that, at a minimum, we test the five methods.</p><p>To help simplify the testing process, we create one or more functions to make a sample document for the collection. These functions are defined and exported in a file named Sample</p><div></div>.ts. The SampleCourses.ts defines and exports three functions, <code>makeSampleCourse</code>, <code>makeSampleCourseInstance</code>, and <code>getRandomGrade</code>. We use these functions in other tests.<p></p><p>The standard format looks something like:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-ts codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Meteor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">isServer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">describe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;Name of the Collection/&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">testSuite</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">before</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">setup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">removeAllEntities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Always start with an empty database.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">after</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">teardown</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">removeAllEntities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Clean up any residual documents.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Can define and removeIt&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">test1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Test the define and removeIt methods</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">timeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">5000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Do the tests using fast check and or faker. </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Define a document in the collection. const docID = &lt;Collection&gt;.define({ definition object });</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Check to see if the document is defined. expect(&lt;Collection&gt;.isDefined(docID)).to.be.true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Remove the document. &lt;Collection&gt;.removeIt(docID)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Check to see that the document isn&#x27;t defined. expect(&lt;Collection&gt;.isDefined(docID)).to.be.false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Can define duplicates&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">test2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Test if duplicate documents can be defined</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Try to define two documents with the same contents.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// If this is legal the the two document ids should be the same.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// If not then the second define should throw an Exception.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// This test should remove the document(s) it creates.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Can update&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">test3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Test updating documents</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">timeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">5000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create a sample document in the collection. const docID = makeSample&lt;Collection Name&gt;();</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Use fast check assert and properties to create many updates.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Call update &lt;Collection&gt;.update(docID, { update data });</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Get the updated document. &lt;Collection&gt;.findDoc(docID);</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Check the document against the update data using expect.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Clean up the sample document. &lt;Collection&gt;.removeIt(docID);</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Can dumpOne, removeIt, and restoreOne&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">test4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Tests dumpOne and restoreOne</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create a sample document in the collection. let docID = makeSample&lt;Collection Name&gt;();</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Get the original document. const original = &lt;Collection&gt;.findDoc(docID);</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create the dump object. const dumpObject = &lt;Collection&gt;.dumpOne(docID);</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Remove the document. &lt;Collection&gt;.removeIt(docID);</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Ensure it is not defined. expect(&lt;Collection&gt;.isDefined(docID)).to.be.false;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Restore the dump object. docID = &lt;Collection&gt;.restoreOne(dumpObject);</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Ensure the document is defined. expect(&lt;Collection&gt;.isDefined(docID)).to.be.true;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Get the restored document. const restored = &lt;Collection&gt;.findDoc(docID);</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Check the restored document verses the original document.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Don&#x27;t clean up. We want the document for the next test.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Can checkIntegrity no errors&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">test5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Tests checkIntegrity</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Get the problems/errors. const errors = &lt;Collection&gt;.checkIntegrity();</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// If creating the sample document creates all the supporting documents then </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// expect(errors.length).to.equal(0);</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// If not then </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// When we call makeSampleCourse we don&#x27;t create the courses for the prereqs</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// expect(errors.length).to.equal(course.prerequisites.length);</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>The above five tests ensure that our collection&#x27;s basic functionality works. If you define other methods for your collection then you should create more tests after the base five. For example, the CourseCollection tests has additional tests.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-ts codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Can get slug for course&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">test7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> course </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Courses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">findOne</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> slug </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Slugs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getNameFromID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">course</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">slugID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> badSlug </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> faker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">lorem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">word</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">expect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Courses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">findSlugByID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">course</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">equal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">slug</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">expect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Courses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">findSlugByID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">course</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">not</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">equal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">badSlug</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Can detect if has interest&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">test8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> interestID </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">makeSampleInterest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> badInterestID </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">makeSampleInterest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> courseID </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">makeSampleCourse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> interestID </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">expect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Courses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">hasInterest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">courseID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> interestID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">be</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">expect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Courses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">hasInterest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">courseID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> badInterestID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">to</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">be</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="integration-testing"></a>Integration testing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#integration-testing" title="Direct link to heading">#</a></h2><p>Integration tests check that client-level code can interact with the server side appropriately.  To invoke the integration tests, run this command:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">app$ meteor npm run test-app</span></div></div></div></div></div><p>This will run the integration tests (i.e. those files with a <code>test-app.js</code> suffix). Here&#x27;s a sample invocation, again with some lines elided:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">meteor npm run test-app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; radgrad@ test-app /Users/philipjohnson/github/radgrad/radgrad/app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; METEOR_NO_RELEASE_CHECK=1 TEST_BROWSER_DRIVER=nightmare meteor test --full-app --once --driver-package dispatch:mocha --port 3100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[[[[ Tests ]]]]]                             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started proxy.                             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started MongoDB.                           </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:11.926(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:11.934(-10)? ----- RUNNING SERVER TESTS -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:11.935(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:11.937(-10)?   0 passing (0ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:11.939(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:11.939(-10)? ----- RUNNING CLIENT TESTS -----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:11.940(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:11.969(-10)? Kadira: completed instrumenting the app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:11.970(-10)? Test mode. Database initialization disabled, current database cleared, rate limiting disabled.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; Started your app.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=&gt; App running at: http://localhost:3100/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:14.691(-10)?   CareerGoalCollection Meteor Methods </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:14.773(-10)?     Loaded database/testing/minimal.fixture.json: Sample definitions for basic entities.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:15.310(-10)?     Loaded database/testing/abi.student.fixture.json: Defines student Abi Kealoha. Requires minimal.fixture.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:15.379(-10)?     Loaded database/testing/extended.courses.interests.fixture.json: Extends minimal with remaining ICS/EE courses and interests.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:16.508(-10)?     Loaded database/testing/academicplan.fixture.json: Defines Academic Plans. Requires extended.courses.interests.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:16.746(-10)?     Loaded database/testing/abi.courseinstances.fixture.json: Abi&#x27;s course instances. Requires abi.user and extended.courses.interests.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:17.793(-10)?     âœ“ Define Method (594ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:17.817(-10)?     âœ“ Update Method</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:17.849(-10)?     âœ“ Remove Method</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          :                                :                     :</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          :                                :                     :</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:36.396(-10)?   VerificationRequestCollection Meteor Methods </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:36.466(-10)?     Loaded database/testing/minimal.fixture.json: Sample definitions for basic entities.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:36.606(-10)?     Loaded database/testing/abi.student.fixture.json: Defines student Abi Kealoha. Requires minimal.fixture.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:36.626(-10)?     Loaded database/testing/opportunities.fixture.json: Sample opportunities. Requires admin.user.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:37.443(-10)?     âœ“ ProcessVerificationEvent Method (693ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:37.446(-10)?   60 passing (23s)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:37.446(-10)?   3 pending</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:37.611(-10)? All tests finished!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:37.612(-10)? --------------------------------</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:37.612(-10)? SERVER FAILURES: 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:37.613(-10)? CLIENT FAILURES: 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I20170829-15:22:37.614(-10)? --------------------------------</span></div></div></div></div></div><p>As you can see, in contrast to unit tests, no server-only tests were invoked.</p><p>You can reduce the number of tests that are run by using the <code>MOCHA_GREP</code> environment variable, as discussed above.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="miscellaneous-testing-issues"></a>Miscellaneous testing issues.<a aria-hidden="true" tabindex="-1" class="hash-link" href="#miscellaneous-testing-issues" title="Direct link to heading">#</a></h2><p>Here are a few issues regarding tests.</p><ul><li>Arrow function use with Mocha is discouraged. See <a href="http://mochajs.org/#arrow-functions" target="_blank" rel="noopener noreferrer">http://mochajs.org/#arrow-functions</a>.</li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/radgrad2/developer/coding-standards"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Coding Standards</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/radgrad2/developer/e2e-testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">End-to-End Testing Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#unit-testing" class="table-of-contents__link">Unit testing</a><ul><li><a href="#running-the-tests" class="table-of-contents__link">Running the tests</a></li><li><a href="#structure-for-a-collection-unit-test" class="table-of-contents__link">Structure for a Collection Unit Test</a></li></ul></li><li><a href="#integration-testing" class="table-of-contents__link">Integration testing</a></li><li><a href="#miscellaneous-testing-issues" class="table-of-contents__link">Miscellaneous testing issues.</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/markdown-reference">Markdown Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">News</a></li><li class="footer__item"><a href="https://github.com/radgrad/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 University of Hawaii.</div></div></div></footer></div>
<script src="/styles.6291c63d.js"></script>
<script src="/runtime~main.d0e1d563.js"></script>
<script src="/main.3733249a.js"></script>
<script src="/1.38e39c96.js"></script>
<script src="/2.df0254a7.js"></script>
<script src="/103.3e731ed5.js"></script>
<script src="/104.f1b3eb6d.js"></script>
<script src="/f976f453.fba135c2.js"></script>
<script src="/17896441.fec868e8.js"></script>
<script src="/b544806a.0f555ce2.js"></script>
</body>
</html>